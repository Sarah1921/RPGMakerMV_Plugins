# chunkof_DataFileNoCache.js

ゲームデータファイル(data/\*.json)のキャッシュを使用しなくするプラグイン。

ゲームをWeb公開している場合、ゲームの内容(マップやイベント、データベースなど)を変更してもキャッシュが残っていて変更が反映されない場合があります。
それを防止するプラグインです。

キャッシュのコントロールはプラグインを使用する以外にも、サーバの設定などでも可能です。よければそちらも検討ください。

## 留意点
このプラグインで対応できるのはマップやイベント、データベースのみです(data/\*.json)。

以下の変更には効果がありません。


 - 本体ソースファイル(\*.js)の更新
 - プラグインの登録/パラメータ変更(plugins.js)
 - プラグイン(plugins/\*.js)の更新
 - 音楽ファイルや画像ファイルの更新


など

## パラメータ
### useCacheByVersionID
- 1 : 変更がないと確認できたときはキャッシュを使用する。(デフォルト)
- 0 : 常にキャッシュは使用しない。

RPGツクールMV以外の外部ツールを使ってゲームデータファイル(data/\*.json)を変更しないのであれば、1で問題ありません。（恐らく）

変更の有無はversionIDでチェックしています。versionIDはRPGツクールMVでプロジェクトを保存するたびに更新されます。
これはSystem.jsonのロード完了していないとチェックできません。
versionIDによる変更チェックができない場合、とりあえずキャッシュを使用しません。

System.jsonのロードには少し時間がかかるため、実際にはマップやイベントの読み込み時ぐらいしか変更チェックができないことが多いです。

## プラグイン製作背景
Webで随時更新するゲーム(日記)を公開しています。

http://www.tkool.org/chunkof/d/

随時更新するのでキャッシュが効いていると変更が反映されないので対策することにしました。

サーバやhttpリクエストの設定でキャッシュ無効にしても、どうもうまくいかないことがあって(あまりわかっていない)とくにスマホやTwitter内蔵ブラウザで。
いまのところファイル名にクエリを付加するのが一番安定してたのでプラグインにしました。

\*.jsは今のところgulpの https://github.com/elmccd/gulp-uncache を使ってなんとかしています。
